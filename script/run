#!/bin/sh
set -e

# Remove files generated by protoc to have a clean state
rm kaja-twirp.json error.txt || true
#protoc --proto_path=./proto --plugin=protoc-gen-kaja-twirp=/app/protoc-gen-kaja-twirp --kaja-twirp_out=. -Iproto/ $(find proto -iname "*.proto") 2> error.txt || true
# protoc --proto_path=./proto --plugin=protoc-gen-ts=/app/protoc-gen-kaja-twirp --ts_out ./ui/src/gen --ts_opt long_type_string -Iproto/ $(find proto -iname "*.proto")
#(cd ./genpick && npm start)
(cd ./ui && npm run build)
npx serve -s ./ui/build